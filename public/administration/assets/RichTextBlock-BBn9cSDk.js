import{r as c,j as n,B as f,S as v}from"./index-D0zBGyDj.js";import{I as y}from"./IconifyIcon-DxrtKAFV.js";import{B as m}from"./Button-Ch97SugN.js";import{j as E}from"./Menu-B5xWsZiJ.js";import{T as O}from"./TextField-Cg6oPGF_.js";const T=["#000000","#dc2626","#ea580c","#ca8a04","#16a34a","#0891b2","#2563eb","#7c3aed","#db2777"];function L({label:h,value:o,onChange:d,minRows:g=6,placeholder:R}){const i=c.useRef(null),b=c.useRef(null),[j,x]=c.useState(!1),p=c.useRef(null),u=c.useCallback(()=>{const t=i.current;if(!t)return{start:0,end:0,text:""};const r=t.selectionStart,e=t.selectionEnd,s=o.substring(r,e);return{start:r,end:e,text:s}},[o]),C=c.useCallback((t,r)=>{const{start:e,end:s,text:l}=u();if(!l)return;const a=o.substring(0,e)+t+l+r+o.substring(s);d(a),setTimeout(()=>{i.current?.focus(),i.current?.setSelectionRange(e+t.length,s+t.length)},0)},[o,d,u]),S=t=>{t.preventDefault(),C("**","**")},w=t=>{t.preventDefault();const{start:r,end:e}=u();p.current={start:r,end:e},x(!0)},B=t=>{const r=p.current??u(),e=r.start,s=r.end;p.current=null;const l=o.substring(e,s);if(!l)return;const a=`[c=${t}]`,k=o.substring(0,e)+a+l+"[/c]"+o.substring(s);d(k),x(!1),setTimeout(()=>{i.current?.focus(),i.current?.setSelectionRange(e+a.length,s+a.length)},0)};return n.jsxs(f,{sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden",bgcolor:"background.paper"},children:[n.jsxs(v,{direction:"row",spacing:.5,sx:{px:1,py:.5,borderBottom:"1px solid",borderColor:"divider",bgcolor:"action.hover"},children:[n.jsx(m,{size:"small",variant:"text",onMouseDown:S,sx:{minWidth:36,fontWeight:700},title:"Gras (sélectionnez du texte)",children:"B"}),n.jsx(m,{ref:b,size:"small",variant:"text",onMouseDown:w,sx:{minWidth:36},title:"Couleur (sélectionnez du texte)",children:n.jsx(y,{icon:"mdi:format-color-text"})}),n.jsx(E,{open:j,anchorEl:b.current,onClose:()=>x(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:n.jsx(f,{sx:{p:1.5,display:"flex",gap:.5,flexWrap:"wrap",maxWidth:200},children:T.map(t=>n.jsx(f,{onClick:()=>B(t),sx:{width:28,height:28,borderRadius:1,bgcolor:t,cursor:"pointer",border:"2px solid",borderColor:"divider","&:hover":{borderColor:"primary.main"}}},t))})})]}),n.jsx(O,{inputRef:i,fullWidth:!0,multiline:!0,minRows:g,label:h,value:o,onChange:t=>d(t.target.value),placeholder:R,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{border:"none","& fieldset":{border:"none"},bgcolor:"background.paper",color:"text.primary"},"& .MuiInputLabel-root":{color:"text.secondary"}}})]})}export{L as R};
